
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using Layout Templates - Kohana 3 Development</title>
  <meta name="author" content="Samnan ur Rehman">

  
  <meta name="description" content="Using Layout Templates Jan 10th, 2015 5:00 pm Unlike other frameworks out there which provide built-in view parsers and template languages, Kohana 3 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://samnan.github.io/ko3docs/application/layouts">
  <link href="/ko3docs/favicon.png" rel="icon">
  <link href="/ko3docs/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/ko3docs/atom.xml" rel="alternate" title="Kohana 3 Development" type="application/atom+xml">
  <script src="/ko3docs/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/ko3docs/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/ko3docs/">Kohana 3 Development</a></h1>
  
    <h2>Application developer guide</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/ko3docs/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:samnan.github.io/ko3docs" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/ko3docs/">Blog</a></li>
  <li><a href="/ko3docs/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Using Layout Templates</h1>
    <p class="meta">




<time class='entry-date' datetime='2015-01-10T17:00:00+05:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:00 pm</span></time></p>
  </header>
  
  <p>Unlike other frameworks out there which provide built-in view parsers and template languages, Kohana 3 has a very simplistic template based controller for a start. It is so simple you can use it to create your own customized layout and template logic. Also, Kohana works neatly with third party templat engines (like smarty) and there are many modules available that allow quick integration of any of these template engines into your Kohana engine.</p>

<p>Since we are more concerned on getting to know Kohana better, we will use Kohana&rsquo;s built-in template controller to create our sample application layout.</p>

<h3>Creating a Template Controller</h3>

<p>As a good practice, we are going to first create a new Controller for our application called Controller_Common. It will be derived from Kohana&rsquo;s Controller_Template, and then we will add a bit of code to make it work for our application.
The code for Controller_Common is as follows:</p>

<pre><code>        &lt;?php defined('SYSPATH') or die('No direct script access.');

        class Controller_Common extends Controller_Template {

            public $template = 'templates/default';

        } // End Common
</code></pre>

<p>Surprised? Yes, that is how simple it is to have a template controller in your application. The only explanation required here is for this line:</p>

<pre><code>        public $template = 'templates/default';
</code></pre>

<p>This line tells our common controller that we will be using the view <code>view/templates/default</code> as our application layout template. The rest is taken care by the template controller. All we need to do now is create out default view template and use it in our controllers.</p>

<h3>Creating the view template</h3>

<p>Like any other view, we will create a new file &lsquo;default.php&rsquo; in the folder <code>views/templates</code>. The code for the view is as follows:</p>

<pre><code>        &lt;!DOCTYPE html&gt;
        &lt;html lang="en"&gt;
        &lt;head&gt;
            &lt;meta charset="utf-8"&gt;
            &lt;title&gt;Sample Kohana 3 Application&lt;/title&gt;
            &lt;meta name="author" content="Samnan ur Rehman"&gt;
            &lt;meta name="description" content="A sample Kohana 3 application"&gt;
            &lt;link href="&lt;?php echo Kohana::$base_url; ?&gt;css/default.css" rel="stylesheet" type="text/css"&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;?php echo isset($content) ? $content : ''; ?&gt;
        &lt;/body&gt;
        &lt;/html&gt;
</code></pre>

<p>There are two items that require explanation here:</p>

<ul>
<li><strong>Kohana::$base_url: </strong>Adding this before any link makes the link &lsquo;proper&rsquo; by prepending the application&rsquo;s complete url before the link. It is recommended to use it before any css/javascript url in your application, so that there path is always correct.</li>
<li><strong>$content: </strong>This is the actual view for each page that will be embedded within your template by the template controller (which is explained below).</li>
</ul>


<h3>Using the view template in Controllers</h3>

<p>After making that above changes, if you go back and run your application, you will it works without any changes and the browser shows the same output as before. This is because all our controllers are derived from the &lsquo;Controller&rsquo; class.</p>

<p>So, in order to use our layout logic, we first change our home and users controller and make it inherit the Controller_Common class.</p>

<pre><code>        class Controller_Home extends Controller_Common {
        ...



        class Controller_Users extends Controller_Common {

        ...
</code></pre>

<p>Now the only thing left is to populate the &lsquo;$content&rsquo; variable for our template in the controllers. As you will recall, we previously used <code>$this->response->body()</code> to set our application output. Now that we are using a template controller, we will change that line to look like this:</p>

<pre><code>        // $this-&gt;response-&gt;body($view);
        $this-&gt;template-&gt;content = $view;
</code></pre>

<p>And we are done. If you go back and refresh the application in browser, and view it&rsquo;s source, you will see the page properly starts and ends with &lt;html&gt; tags and contains other basic html tags, along with the page output.</p>

<p>For all our future work, we will be deriving all our controllers from Controller_Common, and we will use the above code to use our template based output in browser.</p>

<p><em>You can go ahead and at this point create the &lsquo;css&rsquo; folder along with the &lsquo;index.php&rsquo; file, and put &lsquo;default.css&rsquo; in it with some styles. After that refresh your browser to see the css inddeed loads correctly. If it does not, recheck your code to make sure you follow the guidelines above</em>.</p>

<p>We are now ready to do more complex operations in our application, and we will begin by <a href="/ko3docs/application/web-forms">creating forms</a> and see how to load data into from database, validate user submission and save the data back properly.</p>

  
    <footer>
      <p class="meta">
        
        




<time class='entry-date' datetime='2015-01-10T17:00:00+05:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:00 pm</span></time>
        
      </p>
      
        <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://samnan.github.io/ko3docs/application/layouts/index.html" data-via="" data-counturl="http://samnan.github.io/ko3docs/application/layouts/index.html" >Tweet</a>
  
  
  
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Samnan ur Rehman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
